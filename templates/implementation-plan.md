# [機能名] 実装計画

## 概要

**機能仕様**: `docs/specs/features/[feature-name].md`

[この実装計画の概要を簡潔に説明]

## 実装方針

### アプローチ

[どのようなアプローチで実装するか]

### 技術選択

- **フレームワーク/ライブラリ**: [選択した技術]
- **理由**: [選択理由]

## アーキテクチャ

### コンポーネント構成

```
[コンポーネントの構成を図で表現]

例:
Controller
    ↓
Service
    ↓
Repository
    ↓
Database
```

### ディレクトリ構造

```
src/
├── controllers/
│   └── [feature]-controller.ts
├── services/
│   └── [feature]-service.ts
├── repositories/
│   └── [feature]-repository.ts
├── models/
│   └── [feature].ts
└── tests/
    └── [feature].test.ts
```

## 実装タスク

### Phase 1: 基盤

**推定工数**: [時間/日]

1. **TASK-001**: [タスク名]
   - 内容: [詳細]
   - 依存: なし
   - 成果物: [ファイル名]

2. **TASK-002**: [タスク名]
   - 内容: [詳細]
   - 依存: なし
   - 成果物: [ファイル名]

### Phase 2: コア機能

**推定工数**: [時間/日]

3. **TASK-003**: [タスク名]
   - 内容: [詳細]
   - 依存: TASK-001
   - 成果物: [ファイル名]

4. **TASK-004**: [タスク名]
   - 内容: [詳細]
   - 依存: TASK-002
   - 成果物: [ファイル名]

### Phase 3: テスト・統合

**推定工数**: [時間/日]

5. **TASK-005**: [タスク名]
   - 内容: [詳細]
   - 依存: TASK-003, TASK-004
   - 成果物: [ファイル名]

## 並列実行可能なタスク

以下のタスクは並列実行可能です:

- **グループ1**: TASK-001, TASK-002（依存なし）
- **グループ2**: TASK-003, TASK-004（グループ1完了後）
- **グループ3**: TASK-005（グループ2完了後）

## データベース変更

### 新規テーブル

```sql
-- 実際のSQLは書かず、テーブル構造を説明
テーブル名: [table_name]
カラム:
  - id: 主キー
  - [column1]: [型と説明]
  - [column2]: [型と説明]
  - created_at: 作成日時
  - updated_at: 更新日時
```

### 既存テーブルの変更

```sql
-- 変更内容を説明
テーブル名: [table_name]
追加カラム:
  - [column]: [型と説明]
```

### マイグレーション

- マイグレーションファイル: `migrations/YYYYMMDD_[description].sql`
- ロールバック方法: [説明]

## API変更

### 新規エンドポイント

詳細は `.claude/context/api-specs.md` を更新してください。

- `POST /api/[resource]` - [説明]
- `GET /api/[resource]/:id` - [説明]
- `PUT /api/[resource]/:id` - [説明]
- `DELETE /api/[resource]/:id` - [説明]

### 既存エンドポイントの変更

- `GET /api/[resource]` - [変更内容]

## インターフェース定義

詳細は `.claude/context/interfaces.md` を更新してください。

### 新規型定義

```typescript
interface [InterfaceName] {
  // フィールドの説明（実際のコードは interfaces.md に記載）
}
```

## テスト計画

### 単体テスト

- [Service] のテスト
  - [テストケース1]
  - [テストケース2]

- [Repository] のテスト
  - [テストケース1]
  - [テストケース2]

### 統合テスト

- [エンドポイント] のテスト
  - 正常系: [シナリオ]
  - 異常系: [シナリオ]

### E2Eテスト

- [ユーザーフロー] のテスト
  - [ステップ1]
  - [ステップ2]
  - [ステップ3]

**カバレッジ目標**: 80%以上

## セキュリティ考慮事項

- [ ] 入力バリデーション
- [ ] SQLインジェクション対策
- [ ] XSS対策
- [ ] CSRF対策
- [ ] 認証・認可
- [ ] 機密情報の保護

参考: `docs/rules/security.md`

## パフォーマンス考慮事項

- [ ] N+1問題の回避
- [ ] インデックスの最適化
- [ ] キャッシング戦略
- [ ] レスポンスタイムの測定

## 依存関係

### 外部ライブラリ

```json
{
  "dependencies": {
    "[package-name]": "[version]"
  }
}
```

### 内部モジュール

- [モジュール1]: [用途]
- [モジュール2]: [用途]

## リスクと対策

| リスク | 影響度 | 対策 |
|--------|-------|------|
| [リスク1] | 高/中/低 | [対策] |
| [リスク2] | 高/中/低 | [対策] |

## ロールアウト計画

### デプロイ手順

1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

### ロールバック計画

[問題が発生した場合のロールバック手順]

### モニタリング

- [監視項目1]
- [監視項目2]

## チェックリスト

### 実装前
- [ ] 機能仕様を理解した
- [ ] 依存関係を確認した
- [ ] 必要なライブラリを調査した
- [ ] データベース設計を完了した

### 実装中
- [ ] コーディング規約に準拠
- [ ] セキュリティチェックリストを確認
- [ ] テストを実装
- [ ] ドキュメントを更新

### 実装後
- [ ] すべてのテストが成功
- [ ] コードレビューを完了
- [ ] ドキュメントを更新
- [ ] デプロイ準備完了

## 参考資料

- 機能仕様: `docs/specs/features/[feature-name].md`
- API仕様: `.claude/context/api-specs.md`
- インターフェース定義: `.claude/context/interfaces.md`
- コーディング規約: `docs/rules/coding-standards/`

## 更新履歴

| 日付 | 変更内容 | 担当 |
|------|---------|------|
| YYYY-MM-DD | 初版作成 | - |
